<h1 class="text-center text-secondary mt-3 mb-3"><%= @recipe.name %></h1>
<div class="recipe_details_container">
  <div class="m-3 text-secondary">
    <span class="mt-3 mb-3"> Preparation time : </span><span class="mt-3 mb-3"> <%= @recipe.preparation_time %> </span><br>
    <span class="mt-3 mb-3"> Cooking time : </span><span class="mt-3 mb-3"> <%= @recipe.cooking_time %> </span> <br>
    <span class="mt-3 mb-3"> Step go there : </span>
  </div>
  <div class="toggle-container m-3">
    <% if @recipe.user_id == current_user.id %>
      <%= form_with model: @recipe, url: toggle_recipe_path(@recipe), method: :patch, local: true do |form| %>
        <%= form.hidden_field :public, value: !@recipe.public %>
        <label class="switch">
          <div class="toggle_status_container">
            <button type="submit" class="toggle-button <%= @recipe.public ? 'private' : 'public' %>"></button>
          </div>
        </label>
      <% end %>
    <% end %>
  </div>
</div>

<div class="d-flex justify-content-between w-75 d-block mx-auto">
  <%= link_to "Generate shopping list", recipes_path, class: 'btn btn-warning' %>
  <% if current_user.id == @recipe.user_id %>
  <%= link_to "Add ingrediant", new_recipe_food_path(@recipe), class: 'btn btn-primary' %>
  <% end %>
</div>
<div class="d-block mx-auto w-75">
<% if current_user.id == @recipe.user_id %>
<table class="table ">
  <thead>
    <tr>
      <th scope="col">Food</th>
      <th scope="col">Quantity</th>
      <th scope="col">Value</th>
      <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
  <% @recipe_foods.each do |recipe_food| %>
    <tr>
      <td> <%= recipe_food.food.name %> </td>
      <td><%= recipe_food.quantity %></td>
      <td><%= recipe_food.quantity * recipe_food.food.price %></td>
      <td> <%= form_with model: recipe_food.food, url: recipe_food_path(@recipe.id, recipe_food.food.id), method: :delete, local: false do |f| %>
        <%= f.hidden_field :food_id, value: "1" %>
        <%= f.submit "Delete", class: "btn btn-danger" %>
      <% end %></td>
    </tr>
    <% end %>
  </tbody>
</table>
<% end %>
</div>
</div>

</div>